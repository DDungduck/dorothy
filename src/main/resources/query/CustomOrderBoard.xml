<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.dorothy.member.order.customOrder.dao.CustomOrderBoardDao">

	<!-- 커스텀 제품 주문 게시판 리스트 조회 -->
	<select id="customOrderList" parameterType="customOrder" resultType="customOrder">
		SELECT c_num, c_title, m_id, c_inquiry
		FROM board_customorder
		ORDER BY c_num desc
	</select> 
	
	<select id="customOrderListCnt" parameterType="customOrder" resultType="int">
		SELECT count(c_num) 
		FROM board_customorder
	</select> 
	
	<!-- 커스텀 제품 주문 게시판 글쓰기 -->
	<insert id="customOrderInsert" parameterType="customOrder">
		<selectKey keyProperty="c_num" resultType="int" order="BEFORE">
			SELECT board_customorder_seq.nextval FROM dual
		</selectKey>
		
		INSERT INTO board_customorder(c_num, m_id, c_title, c_content, c_file)
		VALUES(#{c_num}, #{m_id}, #{c_title}, #{c_content}, #{c_file})
	</insert>
	
	<!-- 커스텀 제품 주문 게시판 상세보기 -->
	<select id="customOrderDetail" parameterType="customOrder" resultType="customOrder">
		SELECT c_num, c_title, m_id, c_content, c_file
		FROM board_customorder
		ORDER BY c_num desc
	</select>
	
	<!-- 커스텀 제품 주문 게시판 글 수정 -->
	<update id="customOrderUpdate" parameterType="customOrder">
		UPDATE board_customorder
		SET c_title = #{c_title}, c_content = #{c_content}, c_receiptdate = #{c_receiptdate},
		c_size = #{c_size}, c_etc = #{c_etc}, c_dessert = #{c_dessert}
			<if test="c_file != ''">
				, c_file = #{c_file}
			</if>
		WHERE c_num = #{c_num}
	</update>
	
	
</mapper>